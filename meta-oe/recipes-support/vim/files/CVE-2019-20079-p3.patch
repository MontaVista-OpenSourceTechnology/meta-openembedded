From 6ab299f8a9738ff7728bb08b4478f45c631e4088 Mon Sep 17 00:00:00 2001
From: Milan Shah <mshah@mvista.com>
Date: Tue, 24 Mar 2020 11:50:45 +0530
Subject: [PATCH 3/4] cannot build without terminal feature

Excluded changes from src/version.c

Upstream-Status: Backport from [ https://github.com/vim/vim/commit/fbbd102be0f ]CVE: CVE-2019-20079
Signed-off-by: Milan Shah <mshah@mvista.com>

diff --git a/src/window.c b/src/window.c
index 3be5378..dd2529a 100644
--- a/src/window.c
+++ b/src/window.c
@@ -4457,9 +4457,11 @@ win_enter_ext(
     maketitle();
 #endif
     curwin->w_redr_status = TRUE;
+#ifdef FEAT_TERMINAL
     if (bt_terminal(wp->w_buffer))
 	// terminal is likely in another mode
 	redraw_mode = TRUE;
+#endif
     redraw_tabline = TRUE;
     if (restart_edit)
 	redraw_later(VALID);	/* causes status line redraw */
-- 
2.7.4

